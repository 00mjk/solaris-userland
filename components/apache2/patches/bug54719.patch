https://issues.apache.org/bugzilla/show_bug.cgi?id=54719

--- server/log.c	2009-05-21 10:31:52.000000000 -0700
+++ server/log.c	2013-04-03 02:34:41.324804956 -0700
@@ -775,7 +775,7 @@ AP_DECLARE(void) ap_log_pid(apr_pool_t *
     static pid_t saved_pid = -1;
     pid_t mypid;
     apr_status_t rv;
-    const char *fname;
+    const char *fname, *dname;
 
     if (!filename) {
         return;
@@ -804,6 +804,15 @@ AP_DECLARE(void) ap_log_pid(apr_pool_t *
                       fname);
     }
 
+    dname = apr_pstrndup(p, filename, (strrchr(filename, '/')+1)-filename);
+    if (APR_SUCCESS != (rv = apr_dir_make_recursive(dname,
+            APR_OS_DEFAULT, p))) {
+        ap_log_error(APLOG_MARK, APLOG_ERR, rv, NULL,
+                     "could not create pid directory: %s",
+                     dname);
+        exit(1);
+    }
+
     if ((rv = apr_file_open(&pid_file, fname,
                             APR_WRITE | APR_CREATE | APR_TRUNCATE,
                             APR_UREAD | APR_UWRITE | APR_GREAD | APR_WREAD, p))
