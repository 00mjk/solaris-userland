--- a/docs-xml/configure.ac-bkp	2011-05-23 11:40:30.309466703 +0200
+++ b/docs-xml/configure.ac	2011-05-23 12:18:34.727978926 +0200
@@ -54,5 +54,8 @@
 fi
 
 AC_SUBST(TARGETS)
+AC_SUBST(BUILDDIR)
+AC_SUBST(DOCBOOKXSLVER)
+AC_SUBST(DOCBOOKXSLDIR)
 
 AC_OUTPUT( Makefile.settings build/catalog.xml)
# git-like
--- a/docs-xml/smbdotconf/generate-file-list.sh	Sat Feb 20 01:12:25 2010
+++ b/docs-xml/smbdotconf/generate-file-list.sh	Mon Jan 18 03:38:09 2010
@@ -9,7 +9,10 @@
 cd $DIR
 
 echo "<section xmlns:xi=\"http://www.w3.org/2003/XInclude\">"
-for I in `find . -mindepth 2 -type f -name '*.xml' | sort -t/ -k3 | xargs`
+
+#for I in `find . -mindepth 2 -type f -name '*.xml' | sort -t/ -k3 | xargs`
+# Remove lines containing just one slash
+for I in `find . -type f -name '*.xml' | grep -v '^[^/]*/[^/]*$' | sort -t/ -k3 | xargs`
 do 
 	echo "<xi:include href='$I' parse='xml'/>"
 done
# git-like
--- a/docs-xml/build/catalog.xml.in-bkp	2011-05-23 11:41:02.207116056 +0200
+++ b/docs-xml/build/catalog.xml.in	2011-05-23 12:09:22.968664219 +0200
@@ -2,6 +2,49 @@
 <!DOCTYPE catalog PUBLIC "-//OASIS//DTD Entity Resolution XML Catalog V1.0//EN" "http://www.oasis-open.org/committees/entity/release/1.0/catalog.dtd">
 <catalog xmlns="urn:oasis:names:tc:entity:xmlns:xml:catalog">
 
+<!-- There is obsolete release of the docbook-xml in Solaris so we should
+     download more recent release and rewrite references to it -->
+
+   <delegatePublic
+	publicIdStartString="-//OASIS//ENTITIES DocBook XML"
+	catalog="file:///usr/share/sgml/docbook/xmlcatalog"/>
+
+   <delegatePublic
+	publicIdStartString="-//OASIS//DTD DocBook XML"
+	catalog="file:///usr/share/sgml/docbook/xmlcatalog"/>
+
+   <delegatePublic
+	publicIdStartString="ISO 8879:1986"
+	catalog="file:///usr/share/sgml/docbook/xmlcatalog"/>
+
+   <delegateSystem
+	systemIdStartString="http://www.oasis-open.org/docbook/"
+	catalog="file:///usr/share/sgml/docbook/xmlcatalog"/>
+
+   <delegateURI
+	uriStartString="http://www.oasis-open.org/docbook/"
+	catalog="file:///usr/share/sgml/docbook/xmlcatalog"/>
+
+   <rewriteSystem
+	systemIdStartString="http://docbook.sourceforge.net/release/xsl/@DOCBOOKXSLVER@"
+	rewritePrefix="file:///@DOCBOOKXSLDIR@"/>
+
+   <rewriteURI
+	uriStartString="http://docbook.sourceforge.net/release/xsl/@DOCBOOKXSLVER@"
+	rewritePrefix="file:///@DOCBOOKXSLDIR@"/>
+
+   <rewriteSystem
+	systemIdStartString="http://docbook.sourceforge.net/release/xsl/current"
+	rewritePrefix="file:///@DOCBOOKXSLDIR@"/>
+
+   <rewriteURI
+	uriStartString="http://docbook.sourceforge.net/release/xsl/current"
+	rewritePrefix="file:///@DOCBOOKXSLDIR@"/>
+
+   <rewriteSystem
+	systemIdStartString="http://scrollkeeper.sourceforge.net/dtds/scrollkeeper-omf-1.0"
+	rewritePrefix="file:///usr/share/xml/scrollkeeper/dtds"/>
+
 <!--  XML Catalog file for SAMBA. -->
 
     <rewriteURI
