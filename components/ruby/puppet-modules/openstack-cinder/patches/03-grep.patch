Patch to change /bin/grep to /bin/ggrep as the module uses flags
/bin/grep doesn't understand.

The patch is not suitable for upstream and can be removed when
/bin/grep enters this century.  See bug 22742880 for more information.

--- openstack-cinder-6.1.0/spec/defines/cinder_type_set_spec.rb.orig	2016-04-21 07:44:39.304234219 -0700
+++ openstack-cinder-6.1.0/spec/defines/cinder_type_set_spec.rb	2016-04-21 07:45:54.080994658 -0700
@@ -1,3 +1,7 @@
+#######################################################################
+# Oracle has modified the originally distributed contents of this file.
+#######################################################################
+
 #Author: Andrew Woodward <awoodward@mirantis.com>
 
 require 'spec_helper'
@@ -19,7 +23,7 @@
   it 'should have its execs' do
     is_expected.to contain_exec('cinder type-key sith set monchichi=hippo').with(
       :command => 'cinder type-key sith set monchichi=hippo',
-      :unless  => "cinder extra-specs-list | grep -Eq '\\bsith\\b.*\\bmonchichi\\b.*\\bhippo\\b'",
+      :unless  => "cinder extra-specs-list | ggrep -Eq '\\bsith\\b.*\\bmonchichi\\b.*\\bhippo\\b'",
       :environment => [
         'OS_TENANT_NAME=admin',
         'OS_USERNAME=admin',
--- openstack-cinder-6.1.0/spec/defines/cinder_type_spec.rb.orig	2016-04-21 07:44:43.458867297 -0700
+++ openstack-cinder-6.1.0/spec/defines/cinder_type_spec.rb	2016-04-21 07:45:36.053871835 -0700
@@ -1,3 +1,7 @@
+#######################################################################
+# Oracle has modified the originally distributed contents of this file.
+#######################################################################
+
 #Author: Andrew Woodward <awoodward@mirantis.com>
 
 require 'spec_helper'
@@ -24,7 +28,7 @@
         'OS_USERNAME=admin',
         'OS_PASSWORD=asdf',
         'OS_AUTH_URL=http://127.127.127.1:5000/v2.0/'],
-      :unless  => "cinder type-list | grep -qP '\\bhippo\\b'",
+      :unless  => "cinder type-list | ggrep -qP '\\bhippo\\b'",
       :require => 'Package[python-cinderclient]')
     is_expected.to contain_exec('cinder type-key hippo set volume_backend_name=name1')
     is_expected.to contain_exec('cinder type-key hippo set volume_backend_name=name2')
--- openstack-cinder-6.1.0/manifests/type_set.pp.orig	2016-04-21 07:44:47.661447131 -0700
+++ openstack-cinder-6.1.0/manifests/type_set.pp	2016-04-21 07:45:41.645429540 -0700
@@ -1,3 +1,7 @@
+#######################################################################
+# Oracle has modified the originally distributed contents of this file.
+#######################################################################
+
 # ==Define: cinder::type_set
 #
 # Assigns keys after the volume type is set.
@@ -58,7 +62,7 @@
   exec {"cinder type-key ${type} set ${key}=${name}":
     path        => ['/usr/bin', '/bin'],
     command     => "cinder type-key ${type} set ${key}=${name}",
-    unless      => "cinder extra-specs-list | grep -Eq '\\b${type}\\b.*\\b${key}\\b.*\\b${name}\\b'",
+    unless      => "cinder extra-specs-list | ggrep -Eq '\\b${type}\\b.*\\b${key}\\b.*\\b${name}\\b'",
     environment => concat($cinder_env, $region_env),
     require     => Package['python-cinderclient']
   }
--- openstack-cinder-6.1.0/manifests/type.pp.orig	2016-04-21 07:44:52.352619515 -0700
+++ openstack-cinder-6.1.0/manifests/type.pp	2016-04-21 07:45:48.039994336 -0700
@@ -1,3 +1,7 @@
+#######################################################################
+# Oracle has modified the originally distributed contents of this file.
+#######################################################################
+
 # == Define: cinder::type
 #
 # Creates cinder type and assigns backends.
@@ -66,7 +70,7 @@
 
   exec {"cinder type-create ${volume_name}":
     command     => "cinder type-create ${volume_name}",
-    unless      => "cinder type-list | grep -qP '\\b${volume_name}\\b'",
+    unless      => "cinder type-list | ggrep -qP '\\b${volume_name}\\b'",
     environment => concat($cinder_env, $region_env),
     require     => Package['python-cinderclient'],
     path        => ['/usr/bin', '/bin'],
