# This patch fixes a test failure in gnulib-tests/test-localename
# __getlocalename_l is an Oracle private interface.
# Do not send this patch upstream.

--- grep-3.0/gnulib-tests/localename.c.orig	2017-03-01 07:14:51.129981406 +0000
+++ grep-3.0/gnulib-tests/localename.c	2017-03-01 07:15:51.216928103 +0000
@@ -49,6 +49,9 @@
 # if defined __sun && HAVE_GETLOCALENAME_L
 /* Solaris >= 12.  */
 extern char * getlocalename_l(int, locale_t);
+#  elif defined(sun) || defined(__sun) || defined(__sun__)
+	extern char * __getlocalename_l(int, locale_t);
+	return __getlocalename_l (category, thread_locale);
 # endif
 #endif
 
