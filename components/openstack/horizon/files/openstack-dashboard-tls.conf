LoadModule ssl_module	libexec/mod_ssl.so
LoadModule wsgi_module	libexec/mod_wsgi-2.6.so

#
# Enable Solaris Cryptographic Framework
# (recommended for SPARC T1/T2/T3 based systems only)
#
#SSLCryptoDevice pkcs11

<VirtualHost *:80>
    RedirectPermanent /horizon https://openstack.example.com/horizon
</VirtualHost>

Listen 443

<VirtualHost *:443>
    ServerName openstack.example.com

    SSLEngine On

    # Disable the known insecure SSLv3 protocol
    SSLProtocol all -SSLv3

    #
    # For an overview on SSL with Apache see:
    #    http://httpd.apache.org/docs/2.4/ssl/ssl_howto.html
    # For examples on how to configure certificates and keys see:
    #    http://www.akadia.com/services/ssh_test_certificate.html
    #
    SSLCertificateFile /path/to/Server_PEM-encoded_X.509_Certificate_file
    SSLCACertificateFile /path/to/Concatenated_PEM-encoded_CA_Certificates
    SSLCertificateKeyFile /path/to/Server_PEM-encoded_Private_Key_file

    WSGIScriptAlias /horizon \
        /usr/lib/python2.6/vendor-packages/openstack_dashboard/wsgi/django.wsgi
    WSGIDaemonProcess horizon user=webservd group=webservd processes=3 \
        threads=10

    Alias /static /usr/lib/python2.6/vendor-packages/openstack_dashboard/static/

    <Directory />
        Options FollowSymLinks
        AllowOverride None
    </Directory>

    <Directory /usr/lib/python2.6/vendor-packages/openstack_dashboard/static>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Require all granted
    </Directory>

    <Directory /usr/lib/python2.6/vendor-packages/openstack_dashboard/wsgi>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Require all granted
    </Directory>

    ErrorLog "|/usr/bin/rotatelogs -n 3 \
        /var/lib/openstack_dashboard/horizon_error.log 50M"
    LogLevel warn
    CustomLog "|/usr/bin/rotatelogs -n 3 \
        /var/lib/openstack_dashboard/horizon_access.log 50M" combined
</VirtualHost>
