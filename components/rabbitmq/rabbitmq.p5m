#
# CDDL HEADER START
#
# The contents of this file are subject to the terms of the
# Common Development and Distribution License (the "License").
# You may not use this file except in compliance with the License.
#
# You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE
# or http://www.opensolaris.org/os/licensing.
# See the License for the specific language governing permissions
# and limitations under the License.
#
# When distributing Covered Code, include this CDDL HEADER in each
# file and include the License file at usr/src/OPENSOLARIS.LICENSE.
# If applicable, add the following below this CDDL HEADER, with the
# fields enclosed by brackets "[]" replaced with your own identifying
# information: Portions Copyright [yyyy] [name of copyright owner]
#
# CDDL HEADER END
#

#
# Copyright (c) 2012, 2015, Oracle and/or its affiliates. All rights reserved.
#

<transform path=usr/lib/rabbitmq/bin/(.*) -> set action.hash sbin/%<1>>
<transform path=usr/lib/rabbitmq/ebin/(.*) -> set action.hash ebin/%<1>>
<transform path=usr/lib/rabbitmq/include/(.*) -> set action.hash include/%<1>>
<transform path=usr/lib/rabbitmq/plugins/(.*) -> set action.hash plugins/%<1>>
<transform file path=usr/share/man/.+$ -> add mangler.bypass true >
#
set name=pkg.fmri \
    value=pkg:/network/amqp/rabbitmq@$(IPS_COMPONENT_VERSION),$(BUILD_VERSION)
set name=pkg.summary value="A message broker implementing AMQP"
set name=pkg.description \
    value="RabbitMQ is message broker software written in Erlang that implements the Advanced Message Queuing Protocol (AMQP) standard."
set name=com.oracle.info.description value="the RabbitMQ message broker"
set name=com.oracle.info.tpno value=$(TPNO)
set name=info.classification \
    value="org.opensolaris.category.2008:Web Services/Communications"
set name=info.source-url value=$(COMPONENT_ARCHIVE_URL)
set name=info.upstream value=rabbitmq-discuss@lists.rabbitmq.com
set name=info.upstream-url value=$(COMPONENT_PROJECT_URL)
set name=org.opensolaris.arc-caseid value=PSARC/2013/175
set name=org.opensolaris.consolidation value=$(CONSOLIDATION)
#
file files/rabbitmq-env.conf path=etc/rabbitmq/rabbitmq-env.conf mode=0644 \
    overlay=allow preserve=renamenew
file files/rabbitmq.config path=etc/rabbitmq/rabbitmq.config mode=0644 \
    overlay=allow preserve=renamenew
file files/rabbitmq.xml path=lib/svc/manifest/application/rabbitmq.xml
file files/svc-rabbitmq path=lib/svc/method/rabbitmq
file files/rmq-mplex path=usr/bin/rabbitmq-plugins
link path=usr/bin/rabbitmq-server target=rabbitmq-plugins
link path=usr/bin/rabbitmqctl target=rabbitmq-plugins
file path=usr/lib/rabbitmq/bin/rabbitmq-defaults
file path=usr/lib/rabbitmq/bin/rabbitmq-env
file path=usr/lib/rabbitmq/bin/rabbitmq-plugins
file path=usr/lib/rabbitmq/bin/rabbitmq-server
file path=usr/lib/rabbitmq/bin/rabbitmqctl
file path=usr/lib/rabbitmq/ebin/app_utils.beam
file path=usr/lib/rabbitmq/ebin/background_gc.beam
file path=usr/lib/rabbitmq/ebin/credit_flow.beam
file path=usr/lib/rabbitmq/ebin/delegate.beam
file path=usr/lib/rabbitmq/ebin/delegate_sup.beam
file path=usr/lib/rabbitmq/ebin/dtree.beam
file path=usr/lib/rabbitmq/ebin/file_handle_cache.beam
file path=usr/lib/rabbitmq/ebin/file_handle_cache_stats.beam
file path=usr/lib/rabbitmq/ebin/gatherer.beam
file path=usr/lib/rabbitmq/ebin/gen_server2.beam
file path=usr/lib/rabbitmq/ebin/gm.beam
file path=usr/lib/rabbitmq/ebin/lqueue.beam
file path=usr/lib/rabbitmq/ebin/mirrored_supervisor.beam
file path=usr/lib/rabbitmq/ebin/mirrored_supervisor_sups.beam
file path=usr/lib/rabbitmq/ebin/mnesia_sync.beam
file path=usr/lib/rabbitmq/ebin/mochijson2.beam
file path=usr/lib/rabbitmq/ebin/mochinum.beam
file path=usr/lib/rabbitmq/ebin/pg2_fixed.beam
file path=usr/lib/rabbitmq/ebin/pg_local.beam
file path=usr/lib/rabbitmq/ebin/pmon.beam
file path=usr/lib/rabbitmq/ebin/priority_queue.beam
file path=usr/lib/rabbitmq/ebin/rabbit.app
file path=usr/lib/rabbitmq/ebin/rabbit.beam
file path=usr/lib/rabbitmq/ebin/rabbit_access_control.beam
file path=usr/lib/rabbitmq/ebin/rabbit_alarm.beam
file path=usr/lib/rabbitmq/ebin/rabbit_amqqueue.beam
file path=usr/lib/rabbitmq/ebin/rabbit_amqqueue_process.beam
file path=usr/lib/rabbitmq/ebin/rabbit_amqqueue_sup.beam
file path=usr/lib/rabbitmq/ebin/rabbit_amqqueue_sup_sup.beam
file path=usr/lib/rabbitmq/ebin/rabbit_app.in
file path=usr/lib/rabbitmq/ebin/rabbit_auth_backend_dummy.beam
file path=usr/lib/rabbitmq/ebin/rabbit_auth_backend_internal.beam
file path=usr/lib/rabbitmq/ebin/rabbit_auth_mechanism.beam
file path=usr/lib/rabbitmq/ebin/rabbit_auth_mechanism_amqplain.beam
file path=usr/lib/rabbitmq/ebin/rabbit_auth_mechanism_cr_demo.beam
file path=usr/lib/rabbitmq/ebin/rabbit_auth_mechanism_plain.beam
file path=usr/lib/rabbitmq/ebin/rabbit_authn_backend.beam
file path=usr/lib/rabbitmq/ebin/rabbit_authz_backend.beam
file path=usr/lib/rabbitmq/ebin/rabbit_autoheal.beam
file path=usr/lib/rabbitmq/ebin/rabbit_backing_queue.beam
file path=usr/lib/rabbitmq/ebin/rabbit_basic.beam
file path=usr/lib/rabbitmq/ebin/rabbit_binary_generator.beam
file path=usr/lib/rabbitmq/ebin/rabbit_binary_parser.beam
file path=usr/lib/rabbitmq/ebin/rabbit_binding.beam
file path=usr/lib/rabbitmq/ebin/rabbit_channel.beam
file path=usr/lib/rabbitmq/ebin/rabbit_channel_interceptor.beam
file path=usr/lib/rabbitmq/ebin/rabbit_channel_sup.beam
file path=usr/lib/rabbitmq/ebin/rabbit_channel_sup_sup.beam
file path=usr/lib/rabbitmq/ebin/rabbit_cli.beam
file path=usr/lib/rabbitmq/ebin/rabbit_client_sup.beam
file path=usr/lib/rabbitmq/ebin/rabbit_command_assembler.beam
file path=usr/lib/rabbitmq/ebin/rabbit_connection_helper_sup.beam
file path=usr/lib/rabbitmq/ebin/rabbit_connection_sup.beam
file path=usr/lib/rabbitmq/ebin/rabbit_control_main.beam
file path=usr/lib/rabbitmq/ebin/rabbit_ctl_usage.beam
file path=usr/lib/rabbitmq/ebin/rabbit_dead_letter.beam
file path=usr/lib/rabbitmq/ebin/rabbit_diagnostics.beam
file path=usr/lib/rabbitmq/ebin/rabbit_direct.beam
file path=usr/lib/rabbitmq/ebin/rabbit_disk_monitor.beam
file path=usr/lib/rabbitmq/ebin/rabbit_epmd_monitor.beam
file path=usr/lib/rabbitmq/ebin/rabbit_error_logger.beam
file path=usr/lib/rabbitmq/ebin/rabbit_error_logger_file_h.beam
file path=usr/lib/rabbitmq/ebin/rabbit_event.beam
file path=usr/lib/rabbitmq/ebin/rabbit_exchange.beam
file path=usr/lib/rabbitmq/ebin/rabbit_exchange_decorator.beam
file path=usr/lib/rabbitmq/ebin/rabbit_exchange_type.beam
file path=usr/lib/rabbitmq/ebin/rabbit_exchange_type_direct.beam
file path=usr/lib/rabbitmq/ebin/rabbit_exchange_type_fanout.beam
file path=usr/lib/rabbitmq/ebin/rabbit_exchange_type_headers.beam
file path=usr/lib/rabbitmq/ebin/rabbit_exchange_type_invalid.beam
file path=usr/lib/rabbitmq/ebin/rabbit_exchange_type_topic.beam
file path=usr/lib/rabbitmq/ebin/rabbit_file.beam
file path=usr/lib/rabbitmq/ebin/rabbit_framing.beam
file path=usr/lib/rabbitmq/ebin/rabbit_framing_amqp_0_8.beam
file path=usr/lib/rabbitmq/ebin/rabbit_framing_amqp_0_9_1.beam
file path=usr/lib/rabbitmq/ebin/rabbit_guid.beam
file path=usr/lib/rabbitmq/ebin/rabbit_heartbeat.beam
file path=usr/lib/rabbitmq/ebin/rabbit_limiter.beam
file path=usr/lib/rabbitmq/ebin/rabbit_log.beam
file path=usr/lib/rabbitmq/ebin/rabbit_memory_monitor.beam
file path=usr/lib/rabbitmq/ebin/rabbit_mirror_queue_coordinator.beam
file path=usr/lib/rabbitmq/ebin/rabbit_mirror_queue_master.beam
file path=usr/lib/rabbitmq/ebin/rabbit_mirror_queue_misc.beam
file path=usr/lib/rabbitmq/ebin/rabbit_mirror_queue_mode.beam
file path=usr/lib/rabbitmq/ebin/rabbit_mirror_queue_mode_all.beam
file path=usr/lib/rabbitmq/ebin/rabbit_mirror_queue_mode_exactly.beam
file path=usr/lib/rabbitmq/ebin/rabbit_mirror_queue_mode_nodes.beam
file path=usr/lib/rabbitmq/ebin/rabbit_mirror_queue_slave.beam
file path=usr/lib/rabbitmq/ebin/rabbit_mirror_queue_sync.beam
file path=usr/lib/rabbitmq/ebin/rabbit_misc.beam
file path=usr/lib/rabbitmq/ebin/rabbit_mnesia.beam
file path=usr/lib/rabbitmq/ebin/rabbit_mnesia_rename.beam
file path=usr/lib/rabbitmq/ebin/rabbit_msg_file.beam
file path=usr/lib/rabbitmq/ebin/rabbit_msg_store.beam
file path=usr/lib/rabbitmq/ebin/rabbit_msg_store_ets_index.beam
file path=usr/lib/rabbitmq/ebin/rabbit_msg_store_gc.beam
file path=usr/lib/rabbitmq/ebin/rabbit_msg_store_index.beam
file path=usr/lib/rabbitmq/ebin/rabbit_net.beam
file path=usr/lib/rabbitmq/ebin/rabbit_networking.beam
file path=usr/lib/rabbitmq/ebin/rabbit_node_monitor.beam
file path=usr/lib/rabbitmq/ebin/rabbit_nodes.beam
file path=usr/lib/rabbitmq/ebin/rabbit_parameter_validation.beam
file path=usr/lib/rabbitmq/ebin/rabbit_plugins.beam
file path=usr/lib/rabbitmq/ebin/rabbit_plugins_main.beam
file path=usr/lib/rabbitmq/ebin/rabbit_plugins_usage.beam
file path=usr/lib/rabbitmq/ebin/rabbit_policies.beam
file path=usr/lib/rabbitmq/ebin/rabbit_policy.beam
file path=usr/lib/rabbitmq/ebin/rabbit_policy_validator.beam
file path=usr/lib/rabbitmq/ebin/rabbit_prelaunch.beam
file path=usr/lib/rabbitmq/ebin/rabbit_prequeue.beam
file path=usr/lib/rabbitmq/ebin/rabbit_priority_queue.beam
file path=usr/lib/rabbitmq/ebin/rabbit_queue_collector.beam
file path=usr/lib/rabbitmq/ebin/rabbit_queue_consumers.beam
file path=usr/lib/rabbitmq/ebin/rabbit_queue_decorator.beam
file path=usr/lib/rabbitmq/ebin/rabbit_queue_index.beam
file path=usr/lib/rabbitmq/ebin/rabbit_reader.beam
file path=usr/lib/rabbitmq/ebin/rabbit_recovery_terms.beam
file path=usr/lib/rabbitmq/ebin/rabbit_registry.beam
file path=usr/lib/rabbitmq/ebin/rabbit_restartable_sup.beam
file path=usr/lib/rabbitmq/ebin/rabbit_router.beam
file path=usr/lib/rabbitmq/ebin/rabbit_runtime_parameter.beam
file path=usr/lib/rabbitmq/ebin/rabbit_runtime_parameters.beam
file path=usr/lib/rabbitmq/ebin/rabbit_sasl_report_file_h.beam
file path=usr/lib/rabbitmq/ebin/rabbit_ssl.beam
file path=usr/lib/rabbitmq/ebin/rabbit_sup.beam
file path=usr/lib/rabbitmq/ebin/rabbit_table.beam
file path=usr/lib/rabbitmq/ebin/rabbit_trace.beam
file path=usr/lib/rabbitmq/ebin/rabbit_types.beam
file path=usr/lib/rabbitmq/ebin/rabbit_upgrade.beam
file path=usr/lib/rabbitmq/ebin/rabbit_upgrade_functions.beam
file path=usr/lib/rabbitmq/ebin/rabbit_variable_queue.beam
file path=usr/lib/rabbitmq/ebin/rabbit_version.beam
file path=usr/lib/rabbitmq/ebin/rabbit_vhost.beam
file path=usr/lib/rabbitmq/ebin/rabbit_vm.beam
file path=usr/lib/rabbitmq/ebin/rabbit_writer.beam
file path=usr/lib/rabbitmq/ebin/ssl_compat.beam
file path=usr/lib/rabbitmq/ebin/supervised_lifecycle.beam
file path=usr/lib/rabbitmq/ebin/supervisor2.beam
file path=usr/lib/rabbitmq/ebin/tcp_acceptor.beam
file path=usr/lib/rabbitmq/ebin/tcp_acceptor_sup.beam
file path=usr/lib/rabbitmq/ebin/tcp_listener.beam
file path=usr/lib/rabbitmq/ebin/tcp_listener_sup.beam
file path=usr/lib/rabbitmq/ebin/time_compat.beam
file path=usr/lib/rabbitmq/ebin/truncate.beam
file path=usr/lib/rabbitmq/ebin/vm_memory_monitor.beam
file path=usr/lib/rabbitmq/ebin/worker_pool.beam
file path=usr/lib/rabbitmq/ebin/worker_pool_sup.beam
file path=usr/lib/rabbitmq/ebin/worker_pool_worker.beam
file path=usr/lib/rabbitmq/include/gm_specs.hrl
file path=usr/lib/rabbitmq/include/rabbit.hrl
file path=usr/lib/rabbitmq/include/rabbit_cli.hrl
file path=usr/lib/rabbitmq/include/rabbit_framing.hrl
file path=usr/lib/rabbitmq/include/rabbit_msg_store.hrl
file path=usr/lib/rabbitmq/plugins/README
file path=usr/lib/rabbitmq/plugins/amqp_client-$(COMPONENT_VERSION).ez
file path=usr/lib/rabbitmq/plugins/cowboy-0.5.0-rmq$(COMPONENT_VERSION)-git4b93c2d.ez
file path=usr/lib/rabbitmq/plugins/eldap-$(COMPONENT_VERSION)-gite309de4.ez
file path=usr/lib/rabbitmq/plugins/mochiweb-2.7.0-rmq$(COMPONENT_VERSION)-git680dba8.ez
file path=usr/lib/rabbitmq/plugins/rabbitmq_amqp1_0-$(COMPONENT_VERSION).ez
file path=usr/lib/rabbitmq/plugins/rabbitmq_auth_backend_ldap-$(COMPONENT_VERSION).ez
file path=usr/lib/rabbitmq/plugins/rabbitmq_auth_mechanism_ssl-$(COMPONENT_VERSION).ez
file path=usr/lib/rabbitmq/plugins/rabbitmq_consistent_hash_exchange-$(COMPONENT_VERSION).ez
file path=usr/lib/rabbitmq/plugins/rabbitmq_federation-$(COMPONENT_VERSION).ez
file path=usr/lib/rabbitmq/plugins/rabbitmq_federation_management-$(COMPONENT_VERSION).ez
file path=usr/lib/rabbitmq/plugins/rabbitmq_management-$(COMPONENT_VERSION).ez
file path=usr/lib/rabbitmq/plugins/rabbitmq_management_agent-$(COMPONENT_VERSION).ez
file path=usr/lib/rabbitmq/plugins/rabbitmq_management_visualiser-$(COMPONENT_VERSION).ez
file path=usr/lib/rabbitmq/plugins/rabbitmq_mqtt-$(COMPONENT_VERSION).ez
file path=usr/lib/rabbitmq/plugins/rabbitmq_shovel-$(COMPONENT_VERSION).ez
file path=usr/lib/rabbitmq/plugins/rabbitmq_shovel_management-$(COMPONENT_VERSION).ez
file path=usr/lib/rabbitmq/plugins/rabbitmq_stomp-$(COMPONENT_VERSION).ez
file path=usr/lib/rabbitmq/plugins/rabbitmq_test-$(COMPONENT_VERSION).ez
file path=usr/lib/rabbitmq/plugins/rabbitmq_tracing-$(COMPONENT_VERSION).ez
file path=usr/lib/rabbitmq/plugins/rabbitmq_web_dispatch-$(COMPONENT_VERSION).ez
file path=usr/lib/rabbitmq/plugins/rabbitmq_web_stomp-$(COMPONENT_VERSION).ez
file path=usr/lib/rabbitmq/plugins/rabbitmq_web_stomp_examples-$(COMPONENT_VERSION).ez
file path=usr/lib/rabbitmq/plugins/sockjs-0.3.4-rmq$(COMPONENT_VERSION)-git3132eb9.ez
file path=usr/lib/rabbitmq/plugins/webmachine-1.10.3-rmq$(COMPONENT_VERSION)-gite9359c7.ez
file path=usr/share/man/man1/rabbitmq-plugins.1
file path=usr/share/man/man1/rabbitmq-server.1
file path=usr/share/man/man1/rabbitmqctl.1
file path=usr/share/man/man5/rabbitmq-env.conf.5
dir  path=var/lib/rabbitmq owner=rabbitmq
dir  path=var/log/rabbitmq owner=rabbitmq
#
user username=rabbitmq gcos-field=RabbitMQ group=daemon \
    home-dir=/var/lib/rabbitmq password=NP uid=48
#
license rabbitmq.license license="MPLv1.1, MIT, BSD, Apache 2.0"

# force a dependency on the erlang runtime
depend type=require fmri=__TBD pkg.debug.depend.file=erl \
    pkg.debug.depend.path=usr/bin
