#
# This patch provides support for trimming characters after a port
# specification like:
# kdc = foo.com:3434 # trailing comment
#
# MIT has said they have never supported comments after parameter assignments
# so this is Solaris only for now.
# Patch source: in-house
#
diff -ur krb5-1.13.2/src/lib/krb5/os/locate_kdc.c krb5-1.13.2.port-fix/src/lib/krb5/os/locate_kdc.c
--- krb5-1.13.2/src/lib/krb5/os/locate_kdc.c	2015-08-28 18:31:53.289596722 -0500
+++ krb5-1.13.2.port-fix/src/lib/krb5/os/locate_kdc.c	2015-08-28 18:30:51.201317543 -0500
@@ -270,6 +270,9 @@
         if (port) {
             unsigned long l;
             char *endptr;
+
+            cp = port + strcspn(port, " \t#");
+            *cp = '\0';
             l = strtoul (port, &endptr, 10);
             if (endptr == NULL || *endptr != 0)
                 return EINVAL;
